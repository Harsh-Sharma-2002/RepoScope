from ..schema import  RepoChunksResponse
import chromadb
from chromadb.config import Settings
import os


CHROMA_PERSISTANT_DIR = os.getenv("CHROMA_PERSISTANT_DIR","./.chroma_db")

#################################################################################################################
#################################################################################################################

def get_client():
    """
    Create and return a Chroma client.

    The client is configured to use persistent storage so that
    embeddings survive application restarts.
    """
    client = chromadb.Client(Settings(persist_directory = CHROMA_PERSISTANT_DIR))
    return client

#################################################################################################################
#################################################################################################################

def get_collection():
    pass

#################################################################################################################
#################################################################################################################

def store_repo_embedding(repo_name: str, chunks: RepoChunksResponse):
    pass

#################################################################################################################
#################################################################################################################

def search_repo(repo_name: str, chunk_id: int, content: str, top_k : int = 5):
    pass

#################################################################################################################
#################################################################################################################